# PostgreSQL to SQL Server migration with Kerberos authentication
#
# No passwords required - uses Kerberos tickets
#
# Prerequisites:
#   1. Install krb5-user (Linux) or configure Kerberos (Windows/macOS)
#   2. Create keytab: ktutil or extract from AD
#   3. Or run: kinit svc_migrate@CORP.EXAMPLE.COM
#
# Usage:
#   ./mssql-pg-migrate -c examples/config-pg-to-mssql-kerberos.yaml run

source:
  type: postgres
  host: postgres.corp.example.com
  port: 5432
  database: source_db
  schema: public
  auth: kerberos
  user: svc_migrate@CORP.EXAMPLE.COM
  gssencmode: require
  ssl_mode: disable

target:
  type: mssql
  host: sqlserver.corp.example.com
  port: 1433
  database: TargetDatabase
  schema: dbo
  auth: kerberos
  user: svc_migrate@CORP.EXAMPLE.COM
  keytab: /etc/mssql-migrate.keytab
  realm: CORP.EXAMPLE.COM
  encrypt: "true"

migration:
  workers: 8
  chunk_size: 200000
  write_ahead_writers: 8      # Recommended for PG to MSSQL
  parallel_readers: 1
  create_indexes: true
  create_foreign_keys: true
  create_check_constraints: true
  target_mode: drop_recreate
